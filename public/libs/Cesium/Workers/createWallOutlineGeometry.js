define(["./when-a8daa614","./Cartesian2-c2e87f25","./Transforms-d7f8120c","./ComponentDatatype-11643cbc","./Check-3a7033c5","./GeometryAttribute-c85c47e3","./GeometryAttributes-1356486e","./IndexDatatype-6ac58125","./Math-9c4212b4","./WallGeometryLibrary-23212376","./RuntimeError-3ea13d12","./WebGLConstants-18e33079","./arrayRemoveDuplicates-98e917ed","./PolylinePipeline-f3c4dd31","./EllipsoidGeodesic-fc12f724","./EllipsoidRhumbLine-1b27589f","./IntersectionTests-12c4c5cb","./Plane-44fc4194"],(function(e,i,t,a,n,r,o,s,l,m,d,u,p,f,c,h,g,y){"use strict";var _=new i.Cartesian3,E=new i.Cartesian3;function v(t){var a=(t=e.defaultValue(t,e.defaultValue.EMPTY_OBJECT)).positions,n=t.maximumHeights,r=t.minimumHeights,o=e.defaultValue(t.granularity,l.CesiumMath.RADIANS_PER_DEGREE);t=e.defaultValue(t.ellipsoid,i.Ellipsoid.WGS84);this._positions=a,this._minimumHeights=r,this._maximumHeights=n,this._granularity=o,this._ellipsoid=i.Ellipsoid.clone(t),this._workerName="createWallOutlineGeometry",a=1+a.length*i.Cartesian3.packedLength+2,e.defined(r)&&(a+=r.length),e.defined(n)&&(a+=n.length),this.packedLength=a+i.Ellipsoid.packedLength+1}v.pack=function(t,a,n){var r;n=e.defaultValue(n,0);var o=t._positions,s=o.length;for(a[n++]=s,r=0;r<s;++r,n+=i.Cartesian3.packedLength)i.Cartesian3.pack(o[r],a,n);var l=t._minimumHeights;s=e.defined(l)?l.length:0;if(a[n++]=s,e.defined(l))for(r=0;r<s;++r)a[n++]=l[r];var m=t._maximumHeights;if(s=e.defined(m)?m.length:0,a[n++]=s,e.defined(m))for(r=0;r<s;++r)a[n++]=m[r];return i.Ellipsoid.pack(t._ellipsoid,a,n),a[n+=i.Ellipsoid.packedLength]=t._granularity,a};var C=i.Ellipsoid.clone(i.Ellipsoid.UNIT_SPHERE),H={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:C,granularity:void 0};return v.unpack=function(t,a,n){a=e.defaultValue(a,0);for(var r,o,s=t[a++],l=new Array(s),m=0;m<s;++m,a+=i.Cartesian3.packedLength)l[m]=i.Cartesian3.unpack(t,a);if(0<(s=t[a++]))for(r=new Array(s),m=0;m<s;++m)r[m]=t[a++];if(0<(s=t[a++]))for(o=new Array(s),m=0;m<s;++m)o[m]=t[a++];var d=i.Ellipsoid.unpack(t,a,C),u=t[a+=i.Ellipsoid.packedLength];return e.defined(n)?(n._positions=l,n._minimumHeights=r,n._maximumHeights=o,n._ellipsoid=i.Ellipsoid.clone(d,n._ellipsoid),n._granularity=u,n):(H.positions=l,H.minimumHeights=r,H.maximumHeights=o,H.granularity=u,new v(H))},v.fromConstantHeights=function(i){var t=(i=e.defaultValue(i,e.defaultValue.EMPTY_OBJECT)).positions,a=i.minimumHeight,n=i.maximumHeight,r=e.defined(a),o=e.defined(n);if(r||o)for(var s=t.length,l=r?new Array(s):void 0,m=o?new Array(s):void 0,d=0;d<s;++d)r&&(l[d]=a),o&&(m[d]=n);return new v({positions:t,maximumHeights:m,minimumHeights:l,ellipsoid:i.ellipsoid})},v.createGeometry=function(n){var d=n._positions,u=n._minimumHeights,p=n._maximumHeights,f=n._granularity;n=n._ellipsoid,u=m.WallGeometryLibrary.computePositions(n,d,p,u,f,!1);if(e.defined(u)){var c=u.bottomPositions,h=u.topPositions,g=h.length,y=(f=2*g,new Float64Array(f)),v=0;for(g/=3,w=0;w<g;++w){var C=3*w,H=i.Cartesian3.fromArray(h,C,_);C=i.Cartesian3.fromArray(c,C,E);y[v++]=C.x,y[v++]=C.y,y[v++]=C.z,y[v++]=H.x,y[v++]=H.y,y[v++]=H.z}u=new o.GeometryAttributes({position:new r.GeometryAttribute({componentDatatype:a.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:y})});for(var A=f/3,b=s.IndexDatatype.createTypedArray(A,f=2*A-4+A),k=0,w=0;w<A-2;w+=2){var G=w,L=w+2,x=i.Cartesian3.fromArray(y,3*G,_),P=i.Cartesian3.fromArray(y,3*L,E);i.Cartesian3.equalsEpsilon(x,P,l.CesiumMath.EPSILON10)||(x=w+3,b[k++]=P=w+1,b[k++]=G,b[k++]=P,b[k++]=x,b[k++]=G,b[k++]=L)}return b[k++]=A-2,b[k++]=A-1,new r.Geometry({attributes:u,indices:b,primitiveType:r.PrimitiveType.LINES,boundingSphere:new t.BoundingSphere.fromVertices(y)})}},function(t,a){return(t=e.defined(a)?v.unpack(t,a):t)._ellipsoid=i.Ellipsoid.clone(t._ellipsoid),v.createGeometry(t)}}));